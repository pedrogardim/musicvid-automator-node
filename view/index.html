<html>
  <head>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
      crossorigin="anonymous"
    />
    <script>
      let webSocket = new WebSocket('ws://localhost:8080/');
      let el;

      webSocket.onmessage = (event) => {
        el = document.getElementById('time');
        el.innerHTML = 'Current time on server is: ' + event.data;
      };

      const send = () => {
        const obj = { type: 'newSong' };
        const arr = ['link', 'title', 'author', 'genre'].forEach((key) => {
          obj[key] = document.getElementById(key).value;
        });
        webSocket.send(JSON.stringify(obj));
      };
    </script>
  </head>

  <body>
    <nav class="navbar navbar-dark bg-primary">
      <div class="container-fluid">
        <a
          class="navbar-brand"
          href="#"
          >MusaNCM</a
        >
      </div>
    </nav>
    <div class="container-lg p-4">
      <div class="input-group mb-3">
        <input
          type="text"
          class="form-control"
          placeholder="Enlace de YouTube o SoundCloud"
          aria-label="Username"
          aria-describedby="basic-addon1"
          id="link"
        />
      </div>

      <div class="input-group mb-3">
        <input
          type="text"
          class="form-control"
          placeholder="Título"
          aria-label="Título"
          id="title"
        />
        <input
          type="text"
          class="form-control"
          placeholder="Artista"
          aria-label="Artista"
          id="author"
        />
        <input
          type="text"
          class="form-control"
          placeholder="Genero"
          aria-label="Genero"
          id="genre"
        />
      </div>
      <button
        type="button"
        class="btn btn-primary"
        onClick="send()"
      >
        Añadir
      </button>
      <ul class="list-group mt-4">
        <li
          class="list-group-item d-flex justify-content-between align-items-center"
        >
          A list item
          <span class="badge bg-primary rounded-pill">14</span>
        </li>
        <li
          class="list-group-item d-flex justify-content-between align-items-center"
        >
          A second list item
          <span class="badge bg-primary rounded-pill">2</span>
        </li>
        <li
          class="list-group-item d-flex justify-content-between align-items-center"
        >
          A third list item
          <span class="badge bg-primary rounded-pill">1</span>
        </li>
      </ul>
      <p id="time"></p>
    </div>
  </body>
</html>
